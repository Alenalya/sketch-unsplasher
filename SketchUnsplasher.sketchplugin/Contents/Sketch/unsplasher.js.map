{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/unsplasher.js","webpack://exports/external \"sketch/dom\"","webpack://exports/external \"sketch/settings\"","webpack://exports/external \"sketch/ui\""],"names":["UI","require","DOM","Settings","SymbolMaster","options","initOptions","defaults","scaleFactor","searchTerms","collectionID","option","value","settingForKey","undefined","setSettingForKey","onRandom","context","unsplash","onSearch","inputString","getStringFromUser","cleanValue","replace","trim","toLowerCase","message","onCollection","onSettings","items","selectedIndex","findIndex","item","String","selection","getSelectionFromUser","ok","parseInt","type","document","getSelectedDocument","selectedLayers","layers","imageLayers","filter","layer","length","foreignSymbolMasters","getForeignSymbolMasters","imageIndex","forEach","size","width","frame","height","imageURL","getUnsplashURL","response","requestWithURL","nsimage","NSImage","alloc","initWithData","imageData","MSImageData","initWithImage","fill","sketchObject","style","fills","firstObject","setFillType","setImage","setPatternFillType","e","log","imageOverrides","overrides","override","property","scale","getInstanceScale","largestOverride","largestSize","largestArea","affectedLayer","x","y","IDs","path","split","i","layerInPath","getLayerWithID","getForeignLayerWithID","area","overridePoint","setValue_forOverridePoint_","foreignSymbolList","documentData","foreignSymbols","symbolMasters","push","fromNative","foreignSymbol","localObject","layerID","masters","match","master","find","objectID","instance","symbolMaster","xScale","yScale","index","Math","round","url","request","NSURLRequest","NSURL","URLWithString","NSURLConnection","sendSynchronousRequest_returningResponse_error"],"mappings":"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","file":"unsplasher.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/unsplasher.js\");\n","const UI = require('sketch/ui'),\n      DOM = require('sketch/dom'),\n      Settings = require('sketch/settings'),\n      SymbolMaster = DOM.SymbolMaster;\n\nvar options = initOptions();\n\nfunction initOptions() {\n  const defaults = {\n    scaleFactor: 2,\n    searchTerms: 'landscape',\n    collectionID: '1111575'\n  };\n  for (let option in defaults) {\n    let value = Settings.settingForKey(option);\n    if (value === undefined) {\n      Settings.setSettingForKey(option, defaults[option]);\n    } else {\n      defaults[option] = value;\n    }\n  }\n  return defaults\n}\n\nexport function onRandom(context) {\n  unsplash();\n}\n\nexport function onSearch(context) {\n  let inputString = UI.getStringFromUser('Enter a search term', options.searchTerms);\n  let cleanValue = inputString.replace(/[\\s,]+/g,' ').trim().replace(/\\s+/g,',').toLowerCase();\n\n  if (inputString != 'null') {\n    if (cleanValue === '') {\n      UI.message('⚠️ You need to enter a keyword to search for.');\n    } else {\n      options.searchTerms = cleanValue;\n      Settings.setSettingForKey('searchTerms', cleanValue);\n      unsplash('search');\n    }\n  }\n}\n\nexport function onCollection(context) {\n  let inputString = UI.getStringFromUser('Enter a Collection ID', options.collectionID).trim();\n\n  if (inputString != 'null') {\n    if (inputString === '') {\n      UI.message('⚠️ You need to enter a valid Collection ID.');\n    } else {\n      options.collectionID = inputString;\n      Settings.setSettingForKey('collectionID', inputString);\n      unsplash('collection');\n    }\n  }\n}\n\nexport function onSettings(context) {\n  let items = ['1', '2', '3', '4'];\n  let selectedIndex = items.findIndex(item => item === String(options.scaleFactor));\n\n  let selection = UI.getSelectionFromUser(\n    'Select the factor for scaling images',\n    items,\n    selectedIndex\n  );\n\n  let ok = selection[2];\n  if (ok) {\n    let value = parseInt(items[selection[1]]);\n    options.scaleFactor = value;\n    Settings.setSettingForKey('scaleFactor', value);\n  }\n}\n\nfunction unsplash(type = 'random') {\n\n  var document = DOM.getSelectedDocument(),\n      selection = document.selectedLayers,\n      selectedLayers = document.selectedLayers.layers;\n\n  let imageLayers = selectedLayers.filter(layer => layer.type === 'Shape' || layer.type === 'SymbolInstance');\n\n  if (imageLayers.length === 0) {\n    UI.message('Select some shapes or symbols');\n  } else {\n\n    let foreignSymbolMasters = getForeignSymbolMasters(document);\n    let imageIndex = 1;\n\n    imageLayers.forEach(layer => {\n\n      if (layer.type === 'Shape') {\n\n        let size = {\n          width: layer.frame.width,\n          height: layer.frame.height\n        };\n\n        let imageURL = getUnsplashURL(size, type, imageIndex++);\n\n        try {\n          let response = requestWithURL(imageURL);\n          if (response) {\n            let nsimage = NSImage.alloc().initWithData(response);\n            let imageData = MSImageData.alloc().initWithImage(nsimage);\n            let fill = layer.sketchObject.style().fills().firstObject();\n            fill.setFillType(4);\n            fill.setImage(imageData);\n            fill.setPatternFillType(1);\n          } else {\n            throw '⚠️ Unsplash says no. Check your internet...';\n          }\n        } catch (e) {\n          log(e);\n          UI.message(e);\n          return;\n        }\n\n      } else {\n\n        let imageOverrides = layer.overrides.filter(override => override.property === 'image');\n        let scale = getInstanceScale(layer.sketchObject); // Approx. scale depending on constraints\n        let largestOverride, largestSize, largestArea = 0;\n\n        imageOverrides.forEach((override) => {\n\n          let affectedLayer = override.sketchObject.affectedLayer();\n\n          let size = {\n            width: affectedLayer.frame().width() * scale.x,\n            height: affectedLayer.frame().height() * scale.y\n          };\n\n          // Calculate scale factor for nested overrides\n          let IDs = override.path.split('/');\n\n          for (let i = 0; i < IDs.length - 1; i++) {\n            let sketchObject;\n\n            let layerInPath = document.getLayerWithID(IDs[i]);\n            if (layerInPath === undefined) {\n              sketchObject = getForeignLayerWithID(IDs[i], foreignSymbolMasters);\n            } else {\n              sketchObject = layerInPath.sketchObject;\n            }\n\n            let scale = getInstanceScale(sketchObject);\n            size.width = size.width * scale.x;\n            size.height = size.height * scale.y;\n          }\n\n          let area = size.width * size.height;\n          if (area > largestArea) {\n            largestArea = area;\n            largestSize = size;\n            largestOverride = override;\n          }\n\n        });\n\n        let imageURL = getUnsplashURL(largestSize, type, imageIndex++);\n\n        try {\n          let response = requestWithURL(imageURL);\n          if (response) {\n            let nsimage = NSImage.alloc().initWithData(response);\n            // layer.setOverrideValue(largestOverride, nsimage); // A bug in the API is preventing this from working\n            let imageData = MSImageData.alloc().initWithImage(nsimage);\n            let overridePoint = largestOverride.sketchObject.overridePoint();\n            layer.sketchObject.setValue_forOverridePoint_(imageData, overridePoint);\n          } else {\n            throw '⚠️ Unsplash says no. Check your internet...';\n          }\n        } catch (e) {\n          log(e);\n          UI.message(e);\n          return;\n        }\n\n      }\n    });\n  }\n}\n\nfunction getForeignSymbolMasters(document) {\n  let foreignSymbolList = document.sketchObject.documentData().foreignSymbols();\n  let symbolMasters = [];\n  foreignSymbolList.forEach(foreignSymbol => {\n    symbolMasters.push(SymbolMaster.fromNative(foreignSymbol.localObject()));\n  });\n  return symbolMasters;\n}\n\nfunction getForeignLayerWithID(layerID, masters) {\n  let match;\n  for (let master of masters) {\n    match = master.sketchObject.layers().find(layer => layer.objectID() == layerID);\n    if (match) {break;}\n  }\n  return match;\n}\n\nfunction getInstanceScale(instance) { // Expects sketchObject\n  let master = instance.symbolMaster();\n  let xScale = instance.frame().width() / master.frame().width();\n  let yScale = instance.frame().height() / master.frame().height();\n  return {x: xScale, y: yScale};\n}\n\nfunction getUnsplashURL(size, type, index) {\n  let width = Math.round(size.width * options.scaleFactor);\n  let height = Math.round(size.height * options.scaleFactor);\n\n  if (type === 'search') {\n    return 'https://source.unsplash.com/' + width + 'x' + height + '/?' + options.searchTerms + '&sig=' + index;\n  } else if (type === 'collection') {\n    return 'https://source.unsplash.com/collection/' + options.collectionID + '/' + width + 'x' + height + '/?sig=' + index;\n  } else {\n    return 'https://source.unsplash.com/random/' + width + 'x' + height + '/?sig=' + index;\n  }\n}\n\nfunction requestWithURL(url) {\n  let request = NSURLRequest.requestWithURL(NSURL.URLWithString(url));\n  return NSURLConnection.sendSynchronousRequest_returningResponse_error(request, null, null);\n}\n","module.exports = require(\"sketch/dom\");","module.exports = require(\"sketch/settings\");","module.exports = require(\"sketch/ui\");"],"sourceRoot":""}